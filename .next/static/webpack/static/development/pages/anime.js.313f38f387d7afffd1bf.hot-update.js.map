{"version":3,"file":"static/webpack/static\\development\\pages\\anime.js.313f38f387d7afffd1bf.hot-update.js","sources":["webpack:///./components/AnimeApp.js"],"sourcesContent":["import React,{useContext,memo} from \"react\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { GET_ANIMES } from \"../queries/animeQuery\";\r\nimport AnimeList from \"./AnimeList\";\r\nimport SkeletonList from \"./SkeletonList\";\r\nimport { AnimesProvider } from \"../contexts/animes.context\";\r\n\r\n\r\n\r\nfunction AnimeApp({ season }) {\r\n\r\n  console.log('AnimeApp Component Render');\r\n\r\n  let pagex = 1;\r\n  const { data, error, loading, fetchMore } = useQuery(GET_ANIMES, {\r\n    variables: {\r\n      page: pagex,\r\n      season: season,\r\n      seasonYear: 2019\r\n    },\r\n    onCompleted: data => {\r\n      // Fetch more Anime if there next Page\r\n      if (data.Page.pageInfo.hasNextPage) {\r\n        pagex += 1;\r\n        fetchMore({\r\n          variables: {\r\n            page: pagex\r\n          },\r\n          updateQuery: (prev, { fetchMoreResult }) => {\r\n            return {\r\n              Page: {\r\n                __typename: prev.Page.__typename,\r\n                media: [...prev.Page.media, ...fetchMoreResult.Page.media],\r\n                pageInfo: {\r\n                  ...fetchMoreResult.Page.pageInfo\r\n                }\r\n              }\r\n            };\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  if (loading) return <SkeletonList maxSkeleton={9} />;\r\n  if (error) return <div>errror</div>;\r\n\r\n  return (\r\n    <div >\r\n      {data.Page.media.length > 150 ? (\r\n          <AnimesProvider>\r\n            <AnimeList animes={data.Page.media} />\r\n          </AnimesProvider>\r\n      ) : (\r\n        <SkeletonList maxSkeleton={9} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AnimeApp;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAEA;AAEA;AACA;AALA;AAMA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AADA;AASA;AAdA;AAgBA;AACA;AA3BA;AALA;AAAA;AAAA;AAAA;AACA;AAkCA;AAAA;AAAA;AACA;AAEA;AAIA;AAAA;AAGA;AAAA;AAIA;AACA;AACA;;;;A","sourceRoot":""}