{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { GET_ANIMES } from \"../queries/animeQuery\";\nimport AnimeList from \"./AnimeList\";\nimport SkeletonList from \"./SkeletonList\";\nimport { AnimesProvider } from \"../contexts/animes.context\";\n\nfunction AnimeApp({\n  season\n}) {\n  let pagex = 1;\n  const {\n    data,\n    error,\n    loading,\n    fetchMore\n  } = useQuery(GET_ANIMES, {\n    variables: {\n      page: pagex,\n      season: season,\n      seasonYear: 2019\n    },\n    onCompleted: data => {\n      // Fetch more Anime if there next Page\n      if (data.Page.pageInfo.hasNextPage) {\n        pagex += 1;\n        fetchMore({\n          variables: {\n            page: pagex\n          },\n          updateQuery: (prev, {\n            fetchMoreResult\n          }) => {\n            return {\n              Page: {\n                __typename: prev.Page.__typename,\n                media: [...prev.Page.media, ...fetchMoreResult.Page.media],\n                pageInfo: _objectSpread({}, fetchMoreResult.Page.pageInfo)\n              }\n            };\n          }\n        });\n      }\n    }\n  });\n  if (loading) return __jsx(SkeletonList, {\n    maxSkeleton: 9\n  });\n  if (error) return __jsx(\"div\", null, \"errror\");\n  return __jsx(\"div\", null, data.Page.media.length > 50 ? __jsx(AnimesProvider, null, __jsx(AnimeList, {\n    animes: data.Page.media\n  })) : __jsx(SkeletonList, {\n    maxSkeleton: 9\n  }));\n}\n\nexport default AnimeApp;","map":{"version":3,"sources":["I:\\AnimeChart\\animechart\\components\\AnimeApp.js"],"names":["React","useQuery","GET_ANIMES","AnimeList","SkeletonList","AnimesProvider","AnimeApp","season","pagex","data","error","loading","fetchMore","variables","page","seasonYear","onCompleted","Page","pageInfo","hasNextPage","updateQuery","prev","fetchMoreResult","__typename","media","length"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,cAAT,QAA+B,4BAA/B;;AAIA,SAASC,QAAT,CAAkB;AAAEC,EAAAA;AAAF,CAAlB,EAA8B;AAE5B,MAAIC,KAAK,GAAG,CAAZ;AACA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA,OAAf;AAAwBC,IAAAA;AAAxB,MAAsCX,QAAQ,CAACC,UAAD,EAAa;AAC/DW,IAAAA,SAAS,EAAE;AACTC,MAAAA,IAAI,EAAEN,KADG;AAETD,MAAAA,MAAM,EAAEA,MAFC;AAGTQ,MAAAA,UAAU,EAAE;AAHH,KADoD;AAM/DC,IAAAA,WAAW,EAAEP,IAAI,IAAI;AACnB;AACA,UAAIA,IAAI,CAACQ,IAAL,CAAUC,QAAV,CAAmBC,WAAvB,EAAoC;AAClCX,QAAAA,KAAK,IAAI,CAAT;AACAI,QAAAA,SAAS,CAAC;AACRC,UAAAA,SAAS,EAAE;AACTC,YAAAA,IAAI,EAAEN;AADG,WADH;AAIRY,UAAAA,WAAW,EAAE,CAACC,IAAD,EAAO;AAAEC,YAAAA;AAAF,WAAP,KAA+B;AAC1C,mBAAO;AACLL,cAAAA,IAAI,EAAE;AACJM,gBAAAA,UAAU,EAAEF,IAAI,CAACJ,IAAL,CAAUM,UADlB;AAEJC,gBAAAA,KAAK,EAAE,CAAC,GAAGH,IAAI,CAACJ,IAAL,CAAUO,KAAd,EAAqB,GAAGF,eAAe,CAACL,IAAhB,CAAqBO,KAA7C,CAFH;AAGJN,gBAAAA,QAAQ,oBACHI,eAAe,CAACL,IAAhB,CAAqBC,QADlB;AAHJ;AADD,aAAP;AASD;AAdO,SAAD,CAAT;AAgBD;AACF;AA3B8D,GAAb,CAApD;AA8BA,MAAIP,OAAJ,EAAa,OAAO,MAAC,YAAD;AAAc,IAAA,WAAW,EAAE;AAA3B,IAAP;AACb,MAAID,KAAJ,EAAW,OAAO,4BAAP;AAEX,SACE,mBACGD,IAAI,CAACQ,IAAL,CAAUO,KAAV,CAAgBC,MAAhB,GAAyB,EAAzB,GACG,MAAC,cAAD,QACE,MAAC,SAAD;AAAW,IAAA,MAAM,EAAEhB,IAAI,CAACQ,IAAL,CAAUO;AAA7B,IADF,CADH,GAKC,MAAC,YAAD;AAAc,IAAA,WAAW,EAAE;AAA3B,IANJ,CADF;AAWD;;AAED,eAAelB,QAAf","sourcesContent":["import React from \"react\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { GET_ANIMES } from \"../queries/animeQuery\";\r\nimport AnimeList from \"./AnimeList\";\r\nimport SkeletonList from \"./SkeletonList\";\r\nimport { AnimesProvider } from \"../contexts/animes.context\";\r\n\r\n\r\n\r\nfunction AnimeApp({ season }) {\r\n\r\n  let pagex = 1;\r\n  const { data, error, loading, fetchMore } = useQuery(GET_ANIMES, {\r\n    variables: {\r\n      page: pagex,\r\n      season: season,\r\n      seasonYear: 2019\r\n    },\r\n    onCompleted: data => {\r\n      // Fetch more Anime if there next Page\r\n      if (data.Page.pageInfo.hasNextPage) {\r\n        pagex += 1;\r\n        fetchMore({\r\n          variables: {\r\n            page: pagex\r\n          },\r\n          updateQuery: (prev, { fetchMoreResult }) => {\r\n            return {\r\n              Page: {\r\n                __typename: prev.Page.__typename,\r\n                media: [...prev.Page.media, ...fetchMoreResult.Page.media],\r\n                pageInfo: {\r\n                  ...fetchMoreResult.Page.pageInfo\r\n                }\r\n              }\r\n            };\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  if (loading) return <SkeletonList maxSkeleton={9} />;\r\n  if (error) return <div>errror</div>;\r\n\r\n  return (\r\n    <div >\r\n      {data.Page.media.length > 50 ? (\r\n          <AnimesProvider>\r\n            <AnimeList animes={data.Page.media} />\r\n          </AnimesProvider>\r\n      ) : (\r\n        <SkeletonList maxSkeleton={9} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AnimeApp;\r\n"]},"metadata":{},"sourceType":"module"}